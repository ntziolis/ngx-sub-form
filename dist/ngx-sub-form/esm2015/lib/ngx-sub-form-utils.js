import { NG_VALUE_ACCESSOR, NG_VALIDATORS, } from '@angular/forms';
import { forwardRef } from '@angular/core';
import { Subject, timer } from 'rxjs';
import { takeUntil, debounce } from 'rxjs/operators';
import { SUB_FORM_COMPONENT_TOKEN } from './ngx-sub-form-tokens';
export function subformComponentProviders(component) {
    return [
        {
            provide: NG_VALUE_ACCESSOR,
            useExisting: forwardRef(() => component),
            multi: true,
        },
        {
            provide: NG_VALIDATORS,
            useExisting: forwardRef(() => component),
            multi: true,
        },
        {
            provide: SUB_FORM_COMPONENT_TOKEN,
            useExisting: forwardRef(() => component),
        },
    ];
}
const wrapAsQuote = (str) => `"${str}"`;
const ɵ0 = wrapAsQuote;
export class MissingFormControlsError extends Error {
    constructor(missingFormControls) {
        super(`Attempt to update the form value with an object that doesn't contains some of the required form control keys.\nMissing: ${missingFormControls
            .map(wrapAsQuote)
            .join(`, `)}`);
    }
}
const ɵ1 = (time) => obs => obs.pipe(debounce(() => timer(time)));
export const NGX_SUB_FORM_HANDLE_VALUE_CHANGES_RATE_STRATEGIES = {
    debounce: ɵ1,
};
/**
 * Easily unsubscribe from an observable stream by appending `takeUntilDestroyed(this)` to the observable pipe.
 * If the component already has a `ngOnDestroy` method defined, it will call this first.
 * Note that the component *must* implement OnDestroy for this to work (the typings will enforce this anyway)
 */
export function takeUntilDestroyed(component) {
    return (source) => {
        const onDestroy = new Subject();
        const previousOnDestroy = component.ngOnDestroy;
        component.ngOnDestroy = () => {
            if (previousOnDestroy) {
                previousOnDestroy.apply(component);
            }
            onDestroy.next();
            onDestroy.complete();
        };
        return source.pipe(takeUntil(onDestroy));
    };
}
/** @internal */
export function isNullOrUndefined(obj) {
    return obj === null || obj === undefined;
}
export { ɵ0, ɵ1 };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXN1Yi1mb3JtLXV0aWxzLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmd4LXN1Yi1mb3JtLyIsInNvdXJjZXMiOlsibGliL25neC1zdWItZm9ybS11dGlscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBRUwsaUJBQWlCLEVBQ2pCLGFBQWEsR0FNZCxNQUFNLGdCQUFnQixDQUFDO0FBQ3hCLE9BQU8sRUFBd0IsVUFBVSxFQUFhLE1BQU0sZUFBZSxDQUFDO0FBQzVFLE9BQU8sRUFBYyxPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ2xELE9BQU8sRUFBRSxTQUFTLEVBQUUsUUFBUSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDckQsT0FBTyxFQUFFLHdCQUF3QixFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFrRWpFLE1BQU0sVUFBVSx5QkFBeUIsQ0FDdkMsU0FBYztJQU1kLE9BQU87UUFDTDtZQUNFLE9BQU8sRUFBRSxpQkFBaUI7WUFDMUIsV0FBVyxFQUFFLFVBQVUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxTQUFTLENBQUM7WUFDeEMsS0FBSyxFQUFFLElBQUk7U0FDWjtRQUNEO1lBQ0UsT0FBTyxFQUFFLGFBQWE7WUFDdEIsV0FBVyxFQUFFLFVBQVUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxTQUFTLENBQUM7WUFDeEMsS0FBSyxFQUFFLElBQUk7U0FDWjtRQUNEO1lBQ0UsT0FBTyxFQUFFLHdCQUF3QjtZQUNqQyxXQUFXLEVBQUUsVUFBVSxDQUFDLEdBQUcsRUFBRSxDQUFDLFNBQVMsQ0FBQztTQUN6QztLQUNGLENBQUM7QUFDSixDQUFDO0FBRUQsTUFBTSxXQUFXLEdBQUcsQ0FBQyxHQUFXLEVBQVUsRUFBRSxDQUFDLElBQUksR0FBRyxHQUFHLENBQUM7O0FBRXhELE1BQU0sT0FBTyx3QkFBMkMsU0FBUSxLQUFLO0lBQ25FLFlBQVksbUJBQXdCO1FBQ2xDLEtBQUssQ0FDSCwySEFBMkgsbUJBQW1CO2FBQzNJLEdBQUcsQ0FBQyxXQUFXLENBQUM7YUFDaEIsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQ2hCLENBQUM7SUFDSixDQUFDO0NBQ0Y7V0FHVyxDQUFPLElBQVksRUFBK0QsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQ25HLEdBQUcsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0FBRnpDLE1BQU0sQ0FBQyxNQUFNLGlEQUFpRCxHQUFHO0lBQy9ELFFBQVEsSUFDK0I7Q0FDeEMsQ0FBQztBQUVGOzs7O0dBSUc7QUFDSCxNQUFNLFVBQVUsa0JBQWtCLENBQUksU0FBb0I7SUFDeEQsT0FBTyxDQUFDLE1BQXFCLEVBQWlCLEVBQUU7UUFDOUMsTUFBTSxTQUFTLEdBQUcsSUFBSSxPQUFPLEVBQUUsQ0FBQztRQUNoQyxNQUFNLGlCQUFpQixHQUFHLFNBQVMsQ0FBQyxXQUFXLENBQUM7UUFFaEQsU0FBUyxDQUFDLFdBQVcsR0FBRyxHQUFHLEVBQUU7WUFDM0IsSUFBSSxpQkFBaUIsRUFBRTtnQkFDckIsaUJBQWlCLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDO2FBQ3BDO1lBRUQsU0FBUyxDQUFDLElBQUksRUFBRSxDQUFDO1lBQ2pCLFNBQVMsQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUN2QixDQUFDLENBQUM7UUFFRixPQUFPLE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7SUFDM0MsQ0FBQyxDQUFDO0FBQ0osQ0FBQztBQUVELGdCQUFnQjtBQUNoQixNQUFNLFVBQVUsaUJBQWlCLENBQUMsR0FBUTtJQUN4QyxPQUFPLEdBQUcsS0FBSyxJQUFJLElBQUksR0FBRyxLQUFLLFNBQVMsQ0FBQztBQUMzQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICBDb250cm9sVmFsdWVBY2Nlc3NvcixcclxuICBOR19WQUxVRV9BQ0NFU1NPUixcclxuICBOR19WQUxJREFUT1JTLFxyXG4gIFZhbGlkYXRpb25FcnJvcnMsXHJcbiAgRm9ybUNvbnRyb2wsXHJcbiAgRm9ybUFycmF5LFxyXG4gIEFic3RyYWN0Q29udHJvbCxcclxuICBGb3JtR3JvdXAsXHJcbn0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xyXG5pbXBvcnQgeyBJbmplY3Rpb25Ub2tlbiwgVHlwZSwgZm9yd2FyZFJlZiwgT25EZXN0cm95IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IE9ic2VydmFibGUsIFN1YmplY3QsIHRpbWVyIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IHRha2VVbnRpbCwgZGVib3VuY2UgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XHJcbmltcG9ydCB7IFNVQl9GT1JNX0NPTVBPTkVOVF9UT0tFTiB9IGZyb20gJy4vbmd4LXN1Yi1mb3JtLXRva2Vucyc7XHJcbmltcG9ydCB7IE5neFN1YkZvcm1Db21wb25lbnQgfSBmcm9tICcuL25neC1zdWItZm9ybS5jb21wb25lbnQnO1xyXG5cclxuZXhwb3J0IHR5cGUgQ29udHJvbHM8VD4gPSB7IFtLIGluIGtleW9mIFRdLT86IEFic3RyYWN0Q29udHJvbCB9O1xyXG5cclxuZXhwb3J0IHR5cGUgQ29udHJvbHNOYW1lczxUPiA9IHsgW0sgaW4ga2V5b2YgVF0tPzogSyB9O1xyXG5cclxuZXhwb3J0IHR5cGUgQ29udHJvbE1hcDxULCBWPiA9IHsgW0sgaW4ga2V5b2YgVF0tPzogViB9O1xyXG5cclxuZXhwb3J0IHR5cGUgQ29udHJvbHNUeXBlPFQ+ID0ge1xyXG4gIFtLIGluIGtleW9mIFRdLT86IFRbS10gZXh0ZW5kcyBhbnlbXSA/IFR5cGVkRm9ybUFycmF5PFRbS10+IDogVHlwZWRGb3JtQ29udHJvbDxUW0tdPiB8IFR5cGVkRm9ybUdyb3VwPFRbS10+O1xyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgRm9ybUVycm9yc1R5cGU8VD4gPSB7XHJcbiAgW0sgaW4ga2V5b2YgVF0tPzogVFtLXSBleHRlbmRzIGFueVtdID8gKG51bGwgfCBWYWxpZGF0aW9uRXJyb3JzKVtdIDogVmFsaWRhdGlvbkVycm9ycztcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIEZvcm1VcGRhdGU8Rm9ybUludGVyZmFjZT4gPSB7IFtGb3JtQ29udHJvbEludGVyZmFjZSBpbiBrZXlvZiBGb3JtSW50ZXJmYWNlXT86IHRydWUgfTtcclxuXHJcbmV4cG9ydCB0eXBlIEZvcm1FcnJvcnM8Rm9ybUludGVyZmFjZT4gPSBudWxsIHwgUGFydGlhbDxcclxuICBGb3JtRXJyb3JzVHlwZTxGb3JtSW50ZXJmYWNlPiAmIHtcclxuICAgIGZvcm1Hcm91cD86IFZhbGlkYXRpb25FcnJvcnM7XHJcbiAgfVxyXG4+O1xyXG5cclxuLy8gdXNpbmcgc2V0L3BhdGNoIHZhbHVlIG9wdGlvbnMgc2lnbmF0dXJlIGZyb20gZm9ybSBjb250cm9scyB0byBhbGxvdyB0eXBpbmcgd2l0aG91dCBhZGRpdGlvbmFsIGNhc3RpbmdcclxuZXhwb3J0IGludGVyZmFjZSBUeXBlZEFic3RyYWN0Q29udHJvbDxUVmFsdWU+IGV4dGVuZHMgQWJzdHJhY3RDb250cm9sIHtcclxuICB2YWx1ZTogVFZhbHVlO1xyXG4gIHZhbHVlQ2hhbmdlczogT2JzZXJ2YWJsZTxUVmFsdWU+O1xyXG4gIHNldFZhbHVlKHZhbHVlOiBUVmFsdWUsIG9wdGlvbnM/OiBQYXJhbWV0ZXJzPEFic3RyYWN0Q29udHJvbFsnc2V0VmFsdWUnXT5bMV0pOiB2b2lkO1xyXG4gIHBhdGNoVmFsdWUodmFsdWU6IFBhcnRpYWw8VFZhbHVlPiwgb3B0aW9ucz86IFBhcmFtZXRlcnM8QWJzdHJhY3RDb250cm9sWydwYXRjaFZhbHVlJ10+WzFdKTogdm9pZDtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBUeXBlZEZvcm1Hcm91cDxUVmFsdWU+IGV4dGVuZHMgRm9ybUdyb3VwIHtcclxuICB2YWx1ZTogVFZhbHVlO1xyXG4gIHZhbHVlQ2hhbmdlczogT2JzZXJ2YWJsZTxUVmFsdWU+O1xyXG4gIGNvbnRyb2xzOiBDb250cm9sc1R5cGU8VFZhbHVlPjtcclxuICBzZXRWYWx1ZSh2YWx1ZTogVFZhbHVlLCBvcHRpb25zPzogUGFyYW1ldGVyczxGb3JtR3JvdXBbJ3NldFZhbHVlJ10+WzFdKTogdm9pZDtcclxuICBwYXRjaFZhbHVlKHZhbHVlOiBQYXJ0aWFsPFRWYWx1ZT4sIG9wdGlvbnM/OiBQYXJhbWV0ZXJzPEZvcm1Hcm91cFsncGF0Y2hWYWx1ZSddPlsxXSk6IHZvaWQ7XHJcbiAgZ2V0UmF3VmFsdWUoKTogVFZhbHVlO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFR5cGVkRm9ybUFycmF5PFRWYWx1ZSBleHRlbmRzIGFueVtdPiBleHRlbmRzIEZvcm1BcnJheSB7XHJcbiAgdmFsdWU6IFRWYWx1ZTtcclxuICB2YWx1ZUNoYW5nZXM6IE9ic2VydmFibGU8VFZhbHVlPjtcclxuICBjb250cm9sczogVHlwZWRBYnN0cmFjdENvbnRyb2w8VFZhbHVlPltdO1xyXG4gIHNldFZhbHVlKHZhbHVlOiBUVmFsdWUsIG9wdGlvbnM/OiBQYXJhbWV0ZXJzPEZvcm1BcnJheVsnc2V0VmFsdWUnXT5bMV0pOiB2b2lkO1xyXG4gIHBhdGNoVmFsdWUodmFsdWU6IFRWYWx1ZSwgb3B0aW9ucz86IFBhcmFtZXRlcnM8Rm9ybUFycmF5WydwYXRjaFZhbHVlJ10+WzFdKTogdm9pZDtcclxuICBnZXRSYXdWYWx1ZSgpOiBUVmFsdWU7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVHlwZWRGb3JtQ29udHJvbDxUVmFsdWU+IGV4dGVuZHMgRm9ybUdyb3VwIHtcclxuICB2YWx1ZTogVFZhbHVlO1xyXG4gIHZhbHVlQ2hhbmdlczogT2JzZXJ2YWJsZTxUVmFsdWU+O1xyXG4gIHNldFZhbHVlKHZhbHVlOiBUVmFsdWUsIG9wdGlvbnM/OiBQYXJhbWV0ZXJzPEZvcm1Db250cm9sWydzZXRWYWx1ZSddPlsxXSk6IHZvaWQ7XHJcbiAgcGF0Y2hWYWx1ZSh2YWx1ZTogUGFydGlhbDxUVmFsdWU+LCBvcHRpb25zPzogUGFyYW1ldGVyczxGb3JtQ29udHJvbFsncGF0Y2hWYWx1ZSddPlsxXSk6IHZvaWQ7XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIEtleXNXaXRoVHlwZTxULCBWPiA9IHsgW0sgaW4ga2V5b2YgVF06IFRbS10gZXh0ZW5kcyBWID8gSyA6IG5ldmVyIH1ba2V5b2YgVF07XHJcblxyXG5leHBvcnQgdHlwZSBBcnJheVByb3BlcnR5S2V5PFQ+ID0gS2V5c1dpdGhUeXBlPFQsIEFycmF5PGFueT4+O1xyXG5cclxuZXhwb3J0IHR5cGUgQXJyYXlQcm9wZXJ0eVZhbHVlPFQsIEsgZXh0ZW5kcyBBcnJheVByb3BlcnR5S2V5PFQ+ID0gQXJyYXlQcm9wZXJ0eUtleTxUPj4gPSBUW0tdIGV4dGVuZHMgQXJyYXk8aW5mZXIgVT5cclxuICA/IFVcclxuICA6IG5ldmVyO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHN1YmZvcm1Db21wb25lbnRQcm92aWRlcnMoXHJcbiAgY29tcG9uZW50OiBhbnksXHJcbik6IHtcclxuICBwcm92aWRlOiBJbmplY3Rpb25Ub2tlbjxDb250cm9sVmFsdWVBY2Nlc3Nvcj47XHJcbiAgdXNlRXhpc3Rpbmc6IFR5cGU8YW55PjtcclxuICBtdWx0aT86IGJvb2xlYW47XHJcbn1bXSB7XHJcbiAgcmV0dXJuIFtcclxuICAgIHtcclxuICAgICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXHJcbiAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IGNvbXBvbmVudCksXHJcbiAgICAgIG11bHRpOiB0cnVlLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgcHJvdmlkZTogTkdfVkFMSURBVE9SUyxcclxuICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gY29tcG9uZW50KSxcclxuICAgICAgbXVsdGk6IHRydWUsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBwcm92aWRlOiBTVUJfRk9STV9DT01QT05FTlRfVE9LRU4sXHJcbiAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IGNvbXBvbmVudCksXHJcbiAgICB9LFxyXG4gIF07XHJcbn1cclxuXHJcbmNvbnN0IHdyYXBBc1F1b3RlID0gKHN0cjogc3RyaW5nKTogc3RyaW5nID0+IGBcIiR7c3RyfVwiYDtcclxuXHJcbmV4cG9ydCBjbGFzcyBNaXNzaW5nRm9ybUNvbnRyb2xzRXJyb3I8VCBleHRlbmRzIHN0cmluZz4gZXh0ZW5kcyBFcnJvciB7XHJcbiAgY29uc3RydWN0b3IobWlzc2luZ0Zvcm1Db250cm9sczogVFtdKSB7XHJcbiAgICBzdXBlcihcclxuICAgICAgYEF0dGVtcHQgdG8gdXBkYXRlIHRoZSBmb3JtIHZhbHVlIHdpdGggYW4gb2JqZWN0IHRoYXQgZG9lc24ndCBjb250YWlucyBzb21lIG9mIHRoZSByZXF1aXJlZCBmb3JtIGNvbnRyb2wga2V5cy5cXG5NaXNzaW5nOiAke21pc3NpbmdGb3JtQ29udHJvbHNcclxuICAgICAgICAubWFwKHdyYXBBc1F1b3RlKVxyXG4gICAgICAgIC5qb2luKGAsIGApfWAsXHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IE5HWF9TVUJfRk9STV9IQU5ETEVfVkFMVUVfQ0hBTkdFU19SQVRFX1NUUkFURUdJRVMgPSB7XHJcbiAgZGVib3VuY2U6IDxULCBVPih0aW1lOiBudW1iZXIpOiBSZXR1cm5UeXBlPE5neFN1YkZvcm1Db21wb25lbnQ8VCwgVT5bJ2hhbmRsZUVtaXNzaW9uUmF0ZSddPiA9PiBvYnMgPT5cclxuICAgIG9icy5waXBlKGRlYm91bmNlKCgpID0+IHRpbWVyKHRpbWUpKSksXHJcbn07XHJcblxyXG4vKipcclxuICogRWFzaWx5IHVuc3Vic2NyaWJlIGZyb20gYW4gb2JzZXJ2YWJsZSBzdHJlYW0gYnkgYXBwZW5kaW5nIGB0YWtlVW50aWxEZXN0cm95ZWQodGhpcylgIHRvIHRoZSBvYnNlcnZhYmxlIHBpcGUuXHJcbiAqIElmIHRoZSBjb21wb25lbnQgYWxyZWFkeSBoYXMgYSBgbmdPbkRlc3Ryb3lgIG1ldGhvZCBkZWZpbmVkLCBpdCB3aWxsIGNhbGwgdGhpcyBmaXJzdC5cclxuICogTm90ZSB0aGF0IHRoZSBjb21wb25lbnQgKm11c3QqIGltcGxlbWVudCBPbkRlc3Ryb3kgZm9yIHRoaXMgdG8gd29yayAodGhlIHR5cGluZ3Mgd2lsbCBlbmZvcmNlIHRoaXMgYW55d2F5KVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHRha2VVbnRpbERlc3Ryb3llZDxUPihjb21wb25lbnQ6IE9uRGVzdHJveSk6IChzb3VyY2U6IE9ic2VydmFibGU8VD4pID0+IE9ic2VydmFibGU8VD4ge1xyXG4gIHJldHVybiAoc291cmNlOiBPYnNlcnZhYmxlPFQ+KTogT2JzZXJ2YWJsZTxUPiA9PiB7XHJcbiAgICBjb25zdCBvbkRlc3Ryb3kgPSBuZXcgU3ViamVjdCgpO1xyXG4gICAgY29uc3QgcHJldmlvdXNPbkRlc3Ryb3kgPSBjb21wb25lbnQubmdPbkRlc3Ryb3k7XHJcblxyXG4gICAgY29tcG9uZW50Lm5nT25EZXN0cm95ID0gKCkgPT4ge1xyXG4gICAgICBpZiAocHJldmlvdXNPbkRlc3Ryb3kpIHtcclxuICAgICAgICBwcmV2aW91c09uRGVzdHJveS5hcHBseShjb21wb25lbnQpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBvbkRlc3Ryb3kubmV4dCgpO1xyXG4gICAgICBvbkRlc3Ryb3kuY29tcGxldGUoKTtcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIHNvdXJjZS5waXBlKHRha2VVbnRpbChvbkRlc3Ryb3kpKTtcclxuICB9O1xyXG59XHJcblxyXG4vKiogQGludGVybmFsICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc051bGxPclVuZGVmaW5lZChvYmo6IGFueSk6IG9iaiBpcyBudWxsIHwgdW5kZWZpbmVkIHtcclxuICByZXR1cm4gb2JqID09PSBudWxsIHx8IG9iaiA9PT0gdW5kZWZpbmVkO1xyXG59XHJcbiJdfQ==