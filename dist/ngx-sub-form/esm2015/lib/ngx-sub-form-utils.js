import { forwardRef } from '@angular/core';
import { NG_VALIDATORS, NG_VALUE_ACCESSOR, } from '@angular/forms';
import { Subject, timer } from 'rxjs';
import { debounce, takeUntil } from 'rxjs/operators';
import { SUB_FORM_COMPONENT_TOKEN } from './ngx-sub-form-tokens';
export function subformComponentProviders(component) {
    return [
        {
            provide: NG_VALUE_ACCESSOR,
            useExisting: forwardRef(() => component),
            multi: true,
        },
        {
            provide: NG_VALIDATORS,
            useExisting: forwardRef(() => component),
            multi: true,
        },
        {
            provide: SUB_FORM_COMPONENT_TOKEN,
            useExisting: forwardRef(() => component),
        },
    ];
}
const wrapAsQuote = (str) => `"${str}"`;
const ɵ0 = wrapAsQuote;
export class MissingFormControlsError extends Error {
    constructor(missingFormControls) {
        super(`Attempt to update the form value with an object that doesn't contains some of the required form control keys.\nMissing: ${missingFormControls
            .map(wrapAsQuote)
            .join(`, `)}`);
    }
}
const ɵ1 = (time) => obs => obs.pipe(debounce(() => timer(time)));
export const NGX_SUB_FORM_HANDLE_VALUE_CHANGES_RATE_STRATEGIES = {
    debounce: ɵ1,
};
/**
 * Easily unsubscribe from an observable stream by appending `takeUntilDestroyed(this)` to the observable pipe.
 * If the component already has a `ngOnDestroy` method defined, it will call this first.
 * Note that the component *must* implement OnDestroy for this to work (the typings will enforce this anyway)
 */
export function takeUntilDestroyed(component) {
    return (source) => {
        const onDestroy = new Subject();
        const previousOnDestroy = component.ngOnDestroy;
        component.ngOnDestroy = () => {
            if (previousOnDestroy) {
                previousOnDestroy.apply(component);
            }
            onDestroy.next();
            onDestroy.complete();
        };
        return source.pipe(takeUntil(onDestroy));
    };
}
/** @internal */
export function isNullOrUndefined(obj) {
    return obj === null || obj === undefined;
}
export { ɵ0, ɵ1 };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXN1Yi1mb3JtLXV0aWxzLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmd4LXN1Yi1mb3JtLyIsInNvdXJjZXMiOlsibGliL25neC1zdWItZm9ybS11dGlscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsVUFBVSxFQUF1QixNQUFNLGVBQWUsQ0FBQztBQUNoRSxPQUFPLEVBS0wsYUFBYSxFQUNiLGlCQUFpQixHQUVsQixNQUFNLGdCQUFnQixDQUFDO0FBQ3hCLE9BQU8sRUFBYyxPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ2xELE9BQU8sRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFFckQsT0FBTyxFQUFFLHdCQUF3QixFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFrRWpFLE1BQU0sVUFBVSx5QkFBeUIsQ0FBQyxTQUFjO0lBQ3RELE9BQU87UUFDTDtZQUNFLE9BQU8sRUFBRSxpQkFBaUI7WUFDMUIsV0FBVyxFQUFFLFVBQVUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxTQUFTLENBQUM7WUFDeEMsS0FBSyxFQUFFLElBQUk7U0FDWjtRQUNEO1lBQ0UsT0FBTyxFQUFFLGFBQWE7WUFDdEIsV0FBVyxFQUFFLFVBQVUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxTQUFTLENBQUM7WUFDeEMsS0FBSyxFQUFFLElBQUk7U0FDWjtRQUNEO1lBQ0UsT0FBTyxFQUFFLHdCQUF3QjtZQUNqQyxXQUFXLEVBQUUsVUFBVSxDQUFDLEdBQUcsRUFBRSxDQUFDLFNBQVMsQ0FBQztTQUN6QztLQUNGLENBQUM7QUFDSixDQUFDO0FBRUQsTUFBTSxXQUFXLEdBQUcsQ0FBQyxHQUFXLEVBQVUsRUFBRSxDQUFDLElBQUksR0FBRyxHQUFHLENBQUM7O0FBRXhELE1BQU0sT0FBTyx3QkFBMkMsU0FBUSxLQUFLO0lBQ25FLFlBQVksbUJBQXdCO1FBQ2xDLEtBQUssQ0FDSCwySEFBMkgsbUJBQW1CO2FBQzNJLEdBQUcsQ0FBQyxXQUFXLENBQUM7YUFDaEIsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQ2hCLENBQUM7SUFDSixDQUFDO0NBQ0Y7V0FHVyxDQUFPLElBQVksRUFBK0QsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQ25HLEdBQUcsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0FBRnpDLE1BQU0sQ0FBQyxNQUFNLGlEQUFpRCxHQUFHO0lBQy9ELFFBQVEsSUFDK0I7Q0FDeEMsQ0FBQztBQUVGOzs7O0dBSUc7QUFDSCxNQUFNLFVBQVUsa0JBQWtCLENBQUksU0FBb0I7SUFDeEQsT0FBTyxDQUFDLE1BQXFCLEVBQWlCLEVBQUU7UUFDOUMsTUFBTSxTQUFTLEdBQUcsSUFBSSxPQUFPLEVBQUUsQ0FBQztRQUNoQyxNQUFNLGlCQUFpQixHQUFHLFNBQVMsQ0FBQyxXQUFXLENBQUM7UUFFaEQsU0FBUyxDQUFDLFdBQVcsR0FBRyxHQUFHLEVBQUU7WUFDM0IsSUFBSSxpQkFBaUIsRUFBRTtnQkFDckIsaUJBQWlCLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDO2FBQ3BDO1lBRUQsU0FBUyxDQUFDLElBQUksRUFBRSxDQUFDO1lBQ2pCLFNBQVMsQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUN2QixDQUFDLENBQUM7UUFFRixPQUFPLE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7SUFDM0MsQ0FBQyxDQUFDO0FBQ0osQ0FBQztBQUVELGdCQUFnQjtBQUNoQixNQUFNLFVBQVUsaUJBQWlCLENBQUMsR0FBUTtJQUN4QyxPQUFPLEdBQUcsS0FBSyxJQUFJLElBQUksR0FBRyxLQUFLLFNBQVMsQ0FBQztBQUMzQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZm9yd2FyZFJlZiwgT25EZXN0cm95LCBQcm92aWRlciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQge1xyXG4gIEFic3RyYWN0Q29udHJvbCxcclxuICBGb3JtQXJyYXksXHJcbiAgRm9ybUNvbnRyb2wsXHJcbiAgRm9ybUdyb3VwLFxyXG4gIE5HX1ZBTElEQVRPUlMsXHJcbiAgTkdfVkFMVUVfQUNDRVNTT1IsXHJcbiAgVmFsaWRhdGlvbkVycm9ycyxcclxufSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XHJcbmltcG9ydCB7IE9ic2VydmFibGUsIFN1YmplY3QsIHRpbWVyIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IGRlYm91bmNlLCB0YWtlVW50aWwgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XHJcblxyXG5pbXBvcnQgeyBTVUJfRk9STV9DT01QT05FTlRfVE9LRU4gfSBmcm9tICcuL25neC1zdWItZm9ybS10b2tlbnMnO1xyXG5pbXBvcnQgeyBOZ3hTdWJGb3JtQ29tcG9uZW50IH0gZnJvbSAnLi9uZ3gtc3ViLWZvcm0uY29tcG9uZW50JztcclxuXHJcbmV4cG9ydCB0eXBlIENvbnRyb2xzPFQ+ID0geyBbSyBpbiBrZXlvZiBUXS0/OiBBYnN0cmFjdENvbnRyb2wgfTtcclxuXHJcbmV4cG9ydCB0eXBlIENvbnRyb2xzTmFtZXM8VD4gPSB7IFtLIGluIGtleW9mIFRdLT86IEsgfTtcclxuXHJcbmV4cG9ydCB0eXBlIENvbnRyb2xNYXA8VCwgVj4gPSB7IFtLIGluIGtleW9mIFRdLT86IFYgfTtcclxuXHJcbmV4cG9ydCB0eXBlIENvbnRyb2xzVHlwZTxUPiA9IHtcclxuICBbSyBpbiBrZXlvZiBUXS0/OiBUW0tdIGV4dGVuZHMgYW55W10gPyBUeXBlZEZvcm1BcnJheTxUW0tdPiA6IFR5cGVkRm9ybUNvbnRyb2w8VFtLXT4gfCBUeXBlZEZvcm1Hcm91cDxUW0tdPjtcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIEZvcm1FcnJvcnNUeXBlPFQ+ID0ge1xyXG4gIFtLIGluIGtleW9mIFRdLT86IFRbS10gZXh0ZW5kcyBhbnlbXSA/IChudWxsIHwgVmFsaWRhdGlvbkVycm9ycylbXSA6IFZhbGlkYXRpb25FcnJvcnM7XHJcbn07XHJcblxyXG5leHBvcnQgdHlwZSBGb3JtVXBkYXRlPEZvcm1JbnRlcmZhY2U+ID0geyBbRm9ybUNvbnRyb2xJbnRlcmZhY2UgaW4ga2V5b2YgRm9ybUludGVyZmFjZV0/OiB0cnVlIH07XHJcblxyXG5leHBvcnQgdHlwZSBGb3JtRXJyb3JzPEZvcm1JbnRlcmZhY2U+ID0gbnVsbCB8IFBhcnRpYWw8XHJcbiAgRm9ybUVycm9yc1R5cGU8Rm9ybUludGVyZmFjZT4gJiB7XHJcbiAgICBmb3JtR3JvdXA/OiBWYWxpZGF0aW9uRXJyb3JzO1xyXG4gIH1cclxuPjtcclxuXHJcbi8vIHVzaW5nIHNldC9wYXRjaCB2YWx1ZSBvcHRpb25zIHNpZ25hdHVyZSBmcm9tIGZvcm0gY29udHJvbHMgdG8gYWxsb3cgdHlwaW5nIHdpdGhvdXQgYWRkaXRpb25hbCBjYXN0aW5nXHJcbmV4cG9ydCBpbnRlcmZhY2UgVHlwZWRBYnN0cmFjdENvbnRyb2w8VFZhbHVlPiBleHRlbmRzIEFic3RyYWN0Q29udHJvbCB7XHJcbiAgdmFsdWU6IFRWYWx1ZTtcclxuICB2YWx1ZUNoYW5nZXM6IE9ic2VydmFibGU8VFZhbHVlPjtcclxuICBzZXRWYWx1ZSh2YWx1ZTogVFZhbHVlLCBvcHRpb25zPzogUGFyYW1ldGVyczxBYnN0cmFjdENvbnRyb2xbJ3NldFZhbHVlJ10+WzFdKTogdm9pZDtcclxuICBwYXRjaFZhbHVlKHZhbHVlOiBQYXJ0aWFsPFRWYWx1ZT4sIG9wdGlvbnM/OiBQYXJhbWV0ZXJzPEFic3RyYWN0Q29udHJvbFsncGF0Y2hWYWx1ZSddPlsxXSk6IHZvaWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVHlwZWRGb3JtR3JvdXA8VFZhbHVlPiBleHRlbmRzIEZvcm1Hcm91cCB7XHJcbiAgdmFsdWU6IFRWYWx1ZTtcclxuICB2YWx1ZUNoYW5nZXM6IE9ic2VydmFibGU8VFZhbHVlPjtcclxuICBjb250cm9sczogQ29udHJvbHNUeXBlPFRWYWx1ZT47XHJcbiAgc2V0VmFsdWUodmFsdWU6IFRWYWx1ZSwgb3B0aW9ucz86IFBhcmFtZXRlcnM8Rm9ybUdyb3VwWydzZXRWYWx1ZSddPlsxXSk6IHZvaWQ7XHJcbiAgcGF0Y2hWYWx1ZSh2YWx1ZTogUGFydGlhbDxUVmFsdWU+LCBvcHRpb25zPzogUGFyYW1ldGVyczxGb3JtR3JvdXBbJ3BhdGNoVmFsdWUnXT5bMV0pOiB2b2lkO1xyXG4gIGdldFJhd1ZhbHVlKCk6IFRWYWx1ZTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBUeXBlZEZvcm1BcnJheTxUVmFsdWUgZXh0ZW5kcyBhbnlbXT4gZXh0ZW5kcyBGb3JtQXJyYXkge1xyXG4gIHZhbHVlOiBUVmFsdWU7XHJcbiAgdmFsdWVDaGFuZ2VzOiBPYnNlcnZhYmxlPFRWYWx1ZT47XHJcbiAgY29udHJvbHM6IFR5cGVkQWJzdHJhY3RDb250cm9sPFRWYWx1ZT5bXTtcclxuICBzZXRWYWx1ZSh2YWx1ZTogVFZhbHVlLCBvcHRpb25zPzogUGFyYW1ldGVyczxGb3JtQXJyYXlbJ3NldFZhbHVlJ10+WzFdKTogdm9pZDtcclxuICBwYXRjaFZhbHVlKHZhbHVlOiBUVmFsdWUsIG9wdGlvbnM/OiBQYXJhbWV0ZXJzPEZvcm1BcnJheVsncGF0Y2hWYWx1ZSddPlsxXSk6IHZvaWQ7XHJcbiAgZ2V0UmF3VmFsdWUoKTogVFZhbHVlO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFR5cGVkRm9ybUNvbnRyb2w8VFZhbHVlPiBleHRlbmRzIEZvcm1Hcm91cCB7XHJcbiAgdmFsdWU6IFRWYWx1ZTtcclxuICB2YWx1ZUNoYW5nZXM6IE9ic2VydmFibGU8VFZhbHVlPjtcclxuICBzZXRWYWx1ZSh2YWx1ZTogVFZhbHVlLCBvcHRpb25zPzogUGFyYW1ldGVyczxGb3JtQ29udHJvbFsnc2V0VmFsdWUnXT5bMV0pOiB2b2lkO1xyXG4gIHBhdGNoVmFsdWUodmFsdWU6IFBhcnRpYWw8VFZhbHVlPiwgb3B0aW9ucz86IFBhcmFtZXRlcnM8Rm9ybUNvbnRyb2xbJ3BhdGNoVmFsdWUnXT5bMV0pOiB2b2lkO1xyXG59XHJcblxyXG5leHBvcnQgdHlwZSBLZXlzV2l0aFR5cGU8VCwgVj4gPSB7IFtLIGluIGtleW9mIFRdOiBUW0tdIGV4dGVuZHMgViA/IEsgOiBuZXZlciB9W2tleW9mIFRdO1xyXG5cclxuZXhwb3J0IHR5cGUgQXJyYXlQcm9wZXJ0eUtleTxUPiA9IEtleXNXaXRoVHlwZTxULCBBcnJheTxhbnk+PjtcclxuXHJcbmV4cG9ydCB0eXBlIEFycmF5UHJvcGVydHlWYWx1ZTxULCBLIGV4dGVuZHMgQXJyYXlQcm9wZXJ0eUtleTxUPiA9IEFycmF5UHJvcGVydHlLZXk8VD4+ID0gVFtLXSBleHRlbmRzIEFycmF5PGluZmVyIFU+XHJcbiAgPyBVXHJcbiAgOiBuZXZlcjtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzdWJmb3JtQ29tcG9uZW50UHJvdmlkZXJzKGNvbXBvbmVudDogYW55KTogUHJvdmlkZXJbXSB7XHJcbiAgcmV0dXJuIFtcclxuICAgIHtcclxuICAgICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXHJcbiAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IGNvbXBvbmVudCksXHJcbiAgICAgIG11bHRpOiB0cnVlLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgcHJvdmlkZTogTkdfVkFMSURBVE9SUyxcclxuICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gY29tcG9uZW50KSxcclxuICAgICAgbXVsdGk6IHRydWUsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBwcm92aWRlOiBTVUJfRk9STV9DT01QT05FTlRfVE9LRU4sXHJcbiAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IGNvbXBvbmVudCksXHJcbiAgICB9LFxyXG4gIF07XHJcbn1cclxuXHJcbmNvbnN0IHdyYXBBc1F1b3RlID0gKHN0cjogc3RyaW5nKTogc3RyaW5nID0+IGBcIiR7c3RyfVwiYDtcclxuXHJcbmV4cG9ydCBjbGFzcyBNaXNzaW5nRm9ybUNvbnRyb2xzRXJyb3I8VCBleHRlbmRzIHN0cmluZz4gZXh0ZW5kcyBFcnJvciB7XHJcbiAgY29uc3RydWN0b3IobWlzc2luZ0Zvcm1Db250cm9sczogVFtdKSB7XHJcbiAgICBzdXBlcihcclxuICAgICAgYEF0dGVtcHQgdG8gdXBkYXRlIHRoZSBmb3JtIHZhbHVlIHdpdGggYW4gb2JqZWN0IHRoYXQgZG9lc24ndCBjb250YWlucyBzb21lIG9mIHRoZSByZXF1aXJlZCBmb3JtIGNvbnRyb2wga2V5cy5cXG5NaXNzaW5nOiAke21pc3NpbmdGb3JtQ29udHJvbHNcclxuICAgICAgICAubWFwKHdyYXBBc1F1b3RlKVxyXG4gICAgICAgIC5qb2luKGAsIGApfWAsXHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IE5HWF9TVUJfRk9STV9IQU5ETEVfVkFMVUVfQ0hBTkdFU19SQVRFX1NUUkFURUdJRVMgPSB7XHJcbiAgZGVib3VuY2U6IDxULCBVPih0aW1lOiBudW1iZXIpOiBSZXR1cm5UeXBlPE5neFN1YkZvcm1Db21wb25lbnQ8VCwgVT5bJ2hhbmRsZUVtaXNzaW9uUmF0ZSddPiA9PiBvYnMgPT5cclxuICAgIG9icy5waXBlKGRlYm91bmNlKCgpID0+IHRpbWVyKHRpbWUpKSksXHJcbn07XHJcblxyXG4vKipcclxuICogRWFzaWx5IHVuc3Vic2NyaWJlIGZyb20gYW4gb2JzZXJ2YWJsZSBzdHJlYW0gYnkgYXBwZW5kaW5nIGB0YWtlVW50aWxEZXN0cm95ZWQodGhpcylgIHRvIHRoZSBvYnNlcnZhYmxlIHBpcGUuXHJcbiAqIElmIHRoZSBjb21wb25lbnQgYWxyZWFkeSBoYXMgYSBgbmdPbkRlc3Ryb3lgIG1ldGhvZCBkZWZpbmVkLCBpdCB3aWxsIGNhbGwgdGhpcyBmaXJzdC5cclxuICogTm90ZSB0aGF0IHRoZSBjb21wb25lbnQgKm11c3QqIGltcGxlbWVudCBPbkRlc3Ryb3kgZm9yIHRoaXMgdG8gd29yayAodGhlIHR5cGluZ3Mgd2lsbCBlbmZvcmNlIHRoaXMgYW55d2F5KVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHRha2VVbnRpbERlc3Ryb3llZDxUPihjb21wb25lbnQ6IE9uRGVzdHJveSk6IChzb3VyY2U6IE9ic2VydmFibGU8VD4pID0+IE9ic2VydmFibGU8VD4ge1xyXG4gIHJldHVybiAoc291cmNlOiBPYnNlcnZhYmxlPFQ+KTogT2JzZXJ2YWJsZTxUPiA9PiB7XHJcbiAgICBjb25zdCBvbkRlc3Ryb3kgPSBuZXcgU3ViamVjdCgpO1xyXG4gICAgY29uc3QgcHJldmlvdXNPbkRlc3Ryb3kgPSBjb21wb25lbnQubmdPbkRlc3Ryb3k7XHJcblxyXG4gICAgY29tcG9uZW50Lm5nT25EZXN0cm95ID0gKCkgPT4ge1xyXG4gICAgICBpZiAocHJldmlvdXNPbkRlc3Ryb3kpIHtcclxuICAgICAgICBwcmV2aW91c09uRGVzdHJveS5hcHBseShjb21wb25lbnQpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBvbkRlc3Ryb3kubmV4dCgpO1xyXG4gICAgICBvbkRlc3Ryb3kuY29tcGxldGUoKTtcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIHNvdXJjZS5waXBlKHRha2VVbnRpbChvbkRlc3Ryb3kpKTtcclxuICB9O1xyXG59XHJcblxyXG4vKiogQGludGVybmFsICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc051bGxPclVuZGVmaW5lZChvYmo6IGFueSk6IG9iaiBpcyBudWxsIHwgdW5kZWZpbmVkIHtcclxuICByZXR1cm4gb2JqID09PSBudWxsIHx8IG9iaiA9PT0gdW5kZWZpbmVkO1xyXG59XHJcbiJdfQ==