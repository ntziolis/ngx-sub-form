import { __extends } from "tslib";
import { NG_VALUE_ACCESSOR, NG_VALIDATORS, } from '@angular/forms';
import { forwardRef } from '@angular/core';
import { Subject, timer } from 'rxjs';
import { takeUntil, debounce } from 'rxjs/operators';
import { SUB_FORM_COMPONENT_TOKEN } from './ngx-sub-form-tokens';
export function subformComponentProviders(component) {
    return [
        {
            provide: NG_VALUE_ACCESSOR,
            useExisting: forwardRef(function () { return component; }),
            multi: true,
        },
        {
            provide: NG_VALIDATORS,
            useExisting: forwardRef(function () { return component; }),
            multi: true,
        },
        {
            provide: SUB_FORM_COMPONENT_TOKEN,
            useExisting: forwardRef(function () { return component; }),
        },
    ];
}
var wrapAsQuote = function (str) { return "\"" + str + "\""; };
var ɵ0 = wrapAsQuote;
var MissingFormControlsError = /** @class */ (function (_super) {
    __extends(MissingFormControlsError, _super);
    function MissingFormControlsError(missingFormControls) {
        return _super.call(this, "Attempt to update the form value with an object that doesn't contains some of the required form control keys.\nMissing: " + missingFormControls
            .map(wrapAsQuote)
            .join(", ")) || this;
    }
    return MissingFormControlsError;
}(Error));
export { MissingFormControlsError };
var ɵ1 = function (time) { return function (obs) {
    return obs.pipe(debounce(function () { return timer(time); }));
}; };
export var NGX_SUB_FORM_HANDLE_VALUE_CHANGES_RATE_STRATEGIES = {
    debounce: ɵ1,
};
/**
 * Easily unsubscribe from an observable stream by appending `takeUntilDestroyed(this)` to the observable pipe.
 * If the component already has a `ngOnDestroy` method defined, it will call this first.
 * Note that the component *must* implement OnDestroy for this to work (the typings will enforce this anyway)
 */
export function takeUntilDestroyed(component) {
    return function (source) {
        var onDestroy = new Subject();
        var previousOnDestroy = component.ngOnDestroy;
        component.ngOnDestroy = function () {
            if (previousOnDestroy) {
                previousOnDestroy.apply(component);
            }
            onDestroy.next();
            onDestroy.complete();
        };
        return source.pipe(takeUntil(onDestroy));
    };
}
/** @internal */
export function isNullOrUndefined(obj) {
    return obj === null || obj === undefined;
}
export { ɵ0, ɵ1 };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXN1Yi1mb3JtLXV0aWxzLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmd4LXN1Yi1mb3JtLyIsInNvdXJjZXMiOlsibGliL25neC1zdWItZm9ybS11dGlscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUVMLGlCQUFpQixFQUNqQixhQUFhLEdBTWQsTUFBTSxnQkFBZ0IsQ0FBQztBQUN4QixPQUFPLEVBQXdCLFVBQVUsRUFBYSxNQUFNLGVBQWUsQ0FBQztBQUM1RSxPQUFPLEVBQWMsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUNsRCxPQUFPLEVBQUUsU0FBUyxFQUFFLFFBQVEsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ3JELE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBa0VqRSxNQUFNLFVBQVUseUJBQXlCLENBQ3ZDLFNBQWM7SUFNZCxPQUFPO1FBQ0w7WUFDRSxPQUFPLEVBQUUsaUJBQWlCO1lBQzFCLFdBQVcsRUFBRSxVQUFVLENBQUMsY0FBTSxPQUFBLFNBQVMsRUFBVCxDQUFTLENBQUM7WUFDeEMsS0FBSyxFQUFFLElBQUk7U0FDWjtRQUNEO1lBQ0UsT0FBTyxFQUFFLGFBQWE7WUFDdEIsV0FBVyxFQUFFLFVBQVUsQ0FBQyxjQUFNLE9BQUEsU0FBUyxFQUFULENBQVMsQ0FBQztZQUN4QyxLQUFLLEVBQUUsSUFBSTtTQUNaO1FBQ0Q7WUFDRSxPQUFPLEVBQUUsd0JBQXdCO1lBQ2pDLFdBQVcsRUFBRSxVQUFVLENBQUMsY0FBTSxPQUFBLFNBQVMsRUFBVCxDQUFTLENBQUM7U0FDekM7S0FDRixDQUFDO0FBQ0osQ0FBQztBQUVELElBQU0sV0FBVyxHQUFHLFVBQUMsR0FBVyxJQUFhLE9BQUEsT0FBSSxHQUFHLE9BQUcsRUFBVixDQUFVLENBQUM7O0FBRXhEO0lBQWdFLDRDQUFLO0lBQ25FLGtDQUFZLG1CQUF3QjtlQUNsQyxrQkFDRSw2SEFBMkgsbUJBQW1CO2FBQzNJLEdBQUcsQ0FBQyxXQUFXLENBQUM7YUFDaEIsSUFBSSxDQUFDLElBQUksQ0FBRyxDQUNoQjtJQUNILENBQUM7SUFDSCwrQkFBQztBQUFELENBQUMsQUFSRCxDQUFnRSxLQUFLLEdBUXBFOztTQUdXLFVBQU8sSUFBWSxJQUFrRSxPQUFBLFVBQUEsR0FBRztJQUNoRyxPQUFBLEdBQUcsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLGNBQU0sT0FBQSxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQVgsQ0FBVyxDQUFDLENBQUM7QUFBckMsQ0FBcUMsRUFEd0QsQ0FDeEQ7QUFGekMsTUFBTSxDQUFDLElBQU0saURBQWlELEdBQUc7SUFDL0QsUUFBUSxJQUMrQjtDQUN4QyxDQUFDO0FBRUY7Ozs7R0FJRztBQUNILE1BQU0sVUFBVSxrQkFBa0IsQ0FBSSxTQUFvQjtJQUN4RCxPQUFPLFVBQUMsTUFBcUI7UUFDM0IsSUFBTSxTQUFTLEdBQUcsSUFBSSxPQUFPLEVBQUUsQ0FBQztRQUNoQyxJQUFNLGlCQUFpQixHQUFHLFNBQVMsQ0FBQyxXQUFXLENBQUM7UUFFaEQsU0FBUyxDQUFDLFdBQVcsR0FBRztZQUN0QixJQUFJLGlCQUFpQixFQUFFO2dCQUNyQixpQkFBaUIsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUM7YUFDcEM7WUFFRCxTQUFTLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDakIsU0FBUyxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQ3ZCLENBQUMsQ0FBQztRQUVGLE9BQU8sTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztJQUMzQyxDQUFDLENBQUM7QUFDSixDQUFDO0FBRUQsZ0JBQWdCO0FBQ2hCLE1BQU0sVUFBVSxpQkFBaUIsQ0FBQyxHQUFRO0lBQ3hDLE9BQU8sR0FBRyxLQUFLLElBQUksSUFBSSxHQUFHLEtBQUssU0FBUyxDQUFDO0FBQzNDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gIENvbnRyb2xWYWx1ZUFjY2Vzc29yLFxyXG4gIE5HX1ZBTFVFX0FDQ0VTU09SLFxyXG4gIE5HX1ZBTElEQVRPUlMsXHJcbiAgVmFsaWRhdGlvbkVycm9ycyxcclxuICBGb3JtQ29udHJvbCxcclxuICBGb3JtQXJyYXksXHJcbiAgQWJzdHJhY3RDb250cm9sLFxyXG4gIEZvcm1Hcm91cCxcclxufSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XHJcbmltcG9ydCB7IEluamVjdGlvblRva2VuLCBUeXBlLCBmb3J3YXJkUmVmLCBPbkRlc3Ryb3kgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgU3ViamVjdCwgdGltZXIgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgdGFrZVVudGlsLCBkZWJvdW5jZSB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuaW1wb3J0IHsgU1VCX0ZPUk1fQ09NUE9ORU5UX1RPS0VOIH0gZnJvbSAnLi9uZ3gtc3ViLWZvcm0tdG9rZW5zJztcclxuaW1wb3J0IHsgTmd4U3ViRm9ybUNvbXBvbmVudCB9IGZyb20gJy4vbmd4LXN1Yi1mb3JtLmNvbXBvbmVudCc7XHJcblxyXG5leHBvcnQgdHlwZSBDb250cm9sczxUPiA9IHsgW0sgaW4ga2V5b2YgVF0tPzogQWJzdHJhY3RDb250cm9sIH07XHJcblxyXG5leHBvcnQgdHlwZSBDb250cm9sc05hbWVzPFQ+ID0geyBbSyBpbiBrZXlvZiBUXS0/OiBLIH07XHJcblxyXG5leHBvcnQgdHlwZSBDb250cm9sTWFwPFQsIFY+ID0geyBbSyBpbiBrZXlvZiBUXS0/OiBWIH07XHJcblxyXG5leHBvcnQgdHlwZSBDb250cm9sc1R5cGU8VD4gPSB7XHJcbiAgW0sgaW4ga2V5b2YgVF0tPzogVFtLXSBleHRlbmRzIGFueVtdID8gVHlwZWRGb3JtQXJyYXk8VFtLXT4gOiBUeXBlZEZvcm1Db250cm9sPFRbS10+IHwgVHlwZWRGb3JtR3JvdXA8VFtLXT47XHJcbn07XHJcblxyXG5leHBvcnQgdHlwZSBGb3JtRXJyb3JzVHlwZTxUPiA9IHtcclxuICBbSyBpbiBrZXlvZiBUXS0/OiBUW0tdIGV4dGVuZHMgYW55W10gPyAobnVsbCB8IFZhbGlkYXRpb25FcnJvcnMpW10gOiBWYWxpZGF0aW9uRXJyb3JzO1xyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgRm9ybVVwZGF0ZTxGb3JtSW50ZXJmYWNlPiA9IHsgW0Zvcm1Db250cm9sSW50ZXJmYWNlIGluIGtleW9mIEZvcm1JbnRlcmZhY2VdPzogdHJ1ZSB9O1xyXG5cclxuZXhwb3J0IHR5cGUgRm9ybUVycm9yczxGb3JtSW50ZXJmYWNlPiA9IG51bGwgfCBQYXJ0aWFsPFxyXG4gIEZvcm1FcnJvcnNUeXBlPEZvcm1JbnRlcmZhY2U+ICYge1xyXG4gICAgZm9ybUdyb3VwPzogVmFsaWRhdGlvbkVycm9ycztcclxuICB9XHJcbj47XHJcblxyXG4vLyB1c2luZyBzZXQvcGF0Y2ggdmFsdWUgb3B0aW9ucyBzaWduYXR1cmUgZnJvbSBmb3JtIGNvbnRyb2xzIHRvIGFsbG93IHR5cGluZyB3aXRob3V0IGFkZGl0aW9uYWwgY2FzdGluZ1xyXG5leHBvcnQgaW50ZXJmYWNlIFR5cGVkQWJzdHJhY3RDb250cm9sPFRWYWx1ZT4gZXh0ZW5kcyBBYnN0cmFjdENvbnRyb2wge1xyXG4gIHZhbHVlOiBUVmFsdWU7XHJcbiAgdmFsdWVDaGFuZ2VzOiBPYnNlcnZhYmxlPFRWYWx1ZT47XHJcbiAgc2V0VmFsdWUodmFsdWU6IFRWYWx1ZSwgb3B0aW9ucz86IFBhcmFtZXRlcnM8QWJzdHJhY3RDb250cm9sWydzZXRWYWx1ZSddPlsxXSk6IHZvaWQ7XHJcbiAgcGF0Y2hWYWx1ZSh2YWx1ZTogUGFydGlhbDxUVmFsdWU+LCBvcHRpb25zPzogUGFyYW1ldGVyczxBYnN0cmFjdENvbnRyb2xbJ3BhdGNoVmFsdWUnXT5bMV0pOiB2b2lkO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFR5cGVkRm9ybUdyb3VwPFRWYWx1ZT4gZXh0ZW5kcyBGb3JtR3JvdXAge1xyXG4gIHZhbHVlOiBUVmFsdWU7XHJcbiAgdmFsdWVDaGFuZ2VzOiBPYnNlcnZhYmxlPFRWYWx1ZT47XHJcbiAgY29udHJvbHM6IENvbnRyb2xzVHlwZTxUVmFsdWU+O1xyXG4gIHNldFZhbHVlKHZhbHVlOiBUVmFsdWUsIG9wdGlvbnM/OiBQYXJhbWV0ZXJzPEZvcm1Hcm91cFsnc2V0VmFsdWUnXT5bMV0pOiB2b2lkO1xyXG4gIHBhdGNoVmFsdWUodmFsdWU6IFBhcnRpYWw8VFZhbHVlPiwgb3B0aW9ucz86IFBhcmFtZXRlcnM8Rm9ybUdyb3VwWydwYXRjaFZhbHVlJ10+WzFdKTogdm9pZDtcclxuICBnZXRSYXdWYWx1ZSgpOiBUVmFsdWU7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVHlwZWRGb3JtQXJyYXk8VFZhbHVlIGV4dGVuZHMgYW55W10+IGV4dGVuZHMgRm9ybUFycmF5IHtcclxuICB2YWx1ZTogVFZhbHVlO1xyXG4gIHZhbHVlQ2hhbmdlczogT2JzZXJ2YWJsZTxUVmFsdWU+O1xyXG4gIGNvbnRyb2xzOiBUeXBlZEFic3RyYWN0Q29udHJvbDxUVmFsdWU+W107XHJcbiAgc2V0VmFsdWUodmFsdWU6IFRWYWx1ZSwgb3B0aW9ucz86IFBhcmFtZXRlcnM8Rm9ybUFycmF5WydzZXRWYWx1ZSddPlsxXSk6IHZvaWQ7XHJcbiAgcGF0Y2hWYWx1ZSh2YWx1ZTogVFZhbHVlLCBvcHRpb25zPzogUGFyYW1ldGVyczxGb3JtQXJyYXlbJ3BhdGNoVmFsdWUnXT5bMV0pOiB2b2lkO1xyXG4gIGdldFJhd1ZhbHVlKCk6IFRWYWx1ZTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBUeXBlZEZvcm1Db250cm9sPFRWYWx1ZT4gZXh0ZW5kcyBGb3JtR3JvdXAge1xyXG4gIHZhbHVlOiBUVmFsdWU7XHJcbiAgdmFsdWVDaGFuZ2VzOiBPYnNlcnZhYmxlPFRWYWx1ZT47XHJcbiAgc2V0VmFsdWUodmFsdWU6IFRWYWx1ZSwgb3B0aW9ucz86IFBhcmFtZXRlcnM8Rm9ybUNvbnRyb2xbJ3NldFZhbHVlJ10+WzFdKTogdm9pZDtcclxuICBwYXRjaFZhbHVlKHZhbHVlOiBQYXJ0aWFsPFRWYWx1ZT4sIG9wdGlvbnM/OiBQYXJhbWV0ZXJzPEZvcm1Db250cm9sWydwYXRjaFZhbHVlJ10+WzFdKTogdm9pZDtcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgS2V5c1dpdGhUeXBlPFQsIFY+ID0geyBbSyBpbiBrZXlvZiBUXTogVFtLXSBleHRlbmRzIFYgPyBLIDogbmV2ZXIgfVtrZXlvZiBUXTtcclxuXHJcbmV4cG9ydCB0eXBlIEFycmF5UHJvcGVydHlLZXk8VD4gPSBLZXlzV2l0aFR5cGU8VCwgQXJyYXk8YW55Pj47XHJcblxyXG5leHBvcnQgdHlwZSBBcnJheVByb3BlcnR5VmFsdWU8VCwgSyBleHRlbmRzIEFycmF5UHJvcGVydHlLZXk8VD4gPSBBcnJheVByb3BlcnR5S2V5PFQ+PiA9IFRbS10gZXh0ZW5kcyBBcnJheTxpbmZlciBVPlxyXG4gID8gVVxyXG4gIDogbmV2ZXI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc3ViZm9ybUNvbXBvbmVudFByb3ZpZGVycyhcclxuICBjb21wb25lbnQ6IGFueSxcclxuKToge1xyXG4gIHByb3ZpZGU6IEluamVjdGlvblRva2VuPENvbnRyb2xWYWx1ZUFjY2Vzc29yPjtcclxuICB1c2VFeGlzdGluZzogVHlwZTxhbnk+O1xyXG4gIG11bHRpPzogYm9vbGVhbjtcclxufVtdIHtcclxuICByZXR1cm4gW1xyXG4gICAge1xyXG4gICAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcclxuICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gY29tcG9uZW50KSxcclxuICAgICAgbXVsdGk6IHRydWUsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBwcm92aWRlOiBOR19WQUxJREFUT1JTLFxyXG4gICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBjb21wb25lbnQpLFxyXG4gICAgICBtdWx0aTogdHJ1ZSxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIHByb3ZpZGU6IFNVQl9GT1JNX0NPTVBPTkVOVF9UT0tFTixcclxuICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gY29tcG9uZW50KSxcclxuICAgIH0sXHJcbiAgXTtcclxufVxyXG5cclxuY29uc3Qgd3JhcEFzUXVvdGUgPSAoc3RyOiBzdHJpbmcpOiBzdHJpbmcgPT4gYFwiJHtzdHJ9XCJgO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1pc3NpbmdGb3JtQ29udHJvbHNFcnJvcjxUIGV4dGVuZHMgc3RyaW5nPiBleHRlbmRzIEVycm9yIHtcclxuICBjb25zdHJ1Y3RvcihtaXNzaW5nRm9ybUNvbnRyb2xzOiBUW10pIHtcclxuICAgIHN1cGVyKFxyXG4gICAgICBgQXR0ZW1wdCB0byB1cGRhdGUgdGhlIGZvcm0gdmFsdWUgd2l0aCBhbiBvYmplY3QgdGhhdCBkb2Vzbid0IGNvbnRhaW5zIHNvbWUgb2YgdGhlIHJlcXVpcmVkIGZvcm0gY29udHJvbCBrZXlzLlxcbk1pc3Npbmc6ICR7bWlzc2luZ0Zvcm1Db250cm9sc1xyXG4gICAgICAgIC5tYXAod3JhcEFzUXVvdGUpXHJcbiAgICAgICAgLmpvaW4oYCwgYCl9YCxcclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgTkdYX1NVQl9GT1JNX0hBTkRMRV9WQUxVRV9DSEFOR0VTX1JBVEVfU1RSQVRFR0lFUyA9IHtcclxuICBkZWJvdW5jZTogPFQsIFU+KHRpbWU6IG51bWJlcik6IFJldHVyblR5cGU8Tmd4U3ViRm9ybUNvbXBvbmVudDxULCBVPlsnaGFuZGxlRW1pc3Npb25SYXRlJ10+ID0+IG9icyA9PlxyXG4gICAgb2JzLnBpcGUoZGVib3VuY2UoKCkgPT4gdGltZXIodGltZSkpKSxcclxufTtcclxuXHJcbi8qKlxyXG4gKiBFYXNpbHkgdW5zdWJzY3JpYmUgZnJvbSBhbiBvYnNlcnZhYmxlIHN0cmVhbSBieSBhcHBlbmRpbmcgYHRha2VVbnRpbERlc3Ryb3llZCh0aGlzKWAgdG8gdGhlIG9ic2VydmFibGUgcGlwZS5cclxuICogSWYgdGhlIGNvbXBvbmVudCBhbHJlYWR5IGhhcyBhIGBuZ09uRGVzdHJveWAgbWV0aG9kIGRlZmluZWQsIGl0IHdpbGwgY2FsbCB0aGlzIGZpcnN0LlxyXG4gKiBOb3RlIHRoYXQgdGhlIGNvbXBvbmVudCAqbXVzdCogaW1wbGVtZW50IE9uRGVzdHJveSBmb3IgdGhpcyB0byB3b3JrICh0aGUgdHlwaW5ncyB3aWxsIGVuZm9yY2UgdGhpcyBhbnl3YXkpXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gdGFrZVVudGlsRGVzdHJveWVkPFQ+KGNvbXBvbmVudDogT25EZXN0cm95KTogKHNvdXJjZTogT2JzZXJ2YWJsZTxUPikgPT4gT2JzZXJ2YWJsZTxUPiB7XHJcbiAgcmV0dXJuIChzb3VyY2U6IE9ic2VydmFibGU8VD4pOiBPYnNlcnZhYmxlPFQ+ID0+IHtcclxuICAgIGNvbnN0IG9uRGVzdHJveSA9IG5ldyBTdWJqZWN0KCk7XHJcbiAgICBjb25zdCBwcmV2aW91c09uRGVzdHJveSA9IGNvbXBvbmVudC5uZ09uRGVzdHJveTtcclxuXHJcbiAgICBjb21wb25lbnQubmdPbkRlc3Ryb3kgPSAoKSA9PiB7XHJcbiAgICAgIGlmIChwcmV2aW91c09uRGVzdHJveSkge1xyXG4gICAgICAgIHByZXZpb3VzT25EZXN0cm95LmFwcGx5KGNvbXBvbmVudCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIG9uRGVzdHJveS5uZXh0KCk7XHJcbiAgICAgIG9uRGVzdHJveS5jb21wbGV0ZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gc291cmNlLnBpcGUodGFrZVVudGlsKG9uRGVzdHJveSkpO1xyXG4gIH07XHJcbn1cclxuXHJcbi8qKiBAaW50ZXJuYWwgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGlzTnVsbE9yVW5kZWZpbmVkKG9iajogYW55KTogb2JqIGlzIG51bGwgfCB1bmRlZmluZWQge1xyXG4gIHJldHVybiBvYmogPT09IG51bGwgfHwgb2JqID09PSB1bmRlZmluZWQ7XHJcbn1cclxuIl19