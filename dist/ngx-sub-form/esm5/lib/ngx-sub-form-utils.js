import { __extends } from "tslib";
import { forwardRef } from '@angular/core';
import { NG_VALIDATORS, NG_VALUE_ACCESSOR, } from '@angular/forms';
import { Subject, timer } from 'rxjs';
import { debounce, takeUntil } from 'rxjs/operators';
import { SUB_FORM_COMPONENT_TOKEN } from './ngx-sub-form-tokens';
export function subformComponentProviders(component) {
    return [
        {
            provide: NG_VALUE_ACCESSOR,
            useExisting: forwardRef(function () { return component; }),
            multi: true,
        },
        {
            provide: NG_VALIDATORS,
            useExisting: forwardRef(function () { return component; }),
            multi: true,
        },
        {
            provide: SUB_FORM_COMPONENT_TOKEN,
            useExisting: forwardRef(function () { return component; }),
        },
    ];
}
var wrapAsQuote = function (str) { return "\"" + str + "\""; };
var ɵ0 = wrapAsQuote;
var MissingFormControlsError = /** @class */ (function (_super) {
    __extends(MissingFormControlsError, _super);
    function MissingFormControlsError(missingFormControls) {
        return _super.call(this, "Attempt to update the form value with an object that doesn't contains some of the required form control keys.\nMissing: " + missingFormControls
            .map(wrapAsQuote)
            .join(", ")) || this;
    }
    return MissingFormControlsError;
}(Error));
export { MissingFormControlsError };
var ɵ1 = function (time) { return function (obs) {
    return obs.pipe(debounce(function () { return timer(time); }));
}; };
export var NGX_SUB_FORM_HANDLE_VALUE_CHANGES_RATE_STRATEGIES = {
    debounce: ɵ1,
};
/**
 * Easily unsubscribe from an observable stream by appending `takeUntilDestroyed(this)` to the observable pipe.
 * If the component already has a `ngOnDestroy` method defined, it will call this first.
 * Note that the component *must* implement OnDestroy for this to work (the typings will enforce this anyway)
 */
export function takeUntilDestroyed(component) {
    return function (source) {
        var onDestroy = new Subject();
        var previousOnDestroy = component.ngOnDestroy;
        component.ngOnDestroy = function () {
            if (previousOnDestroy) {
                previousOnDestroy.apply(component);
            }
            onDestroy.next();
            onDestroy.complete();
        };
        return source.pipe(takeUntil(onDestroy));
    };
}
/** @internal */
export function isNullOrUndefined(obj) {
    return obj === null || obj === undefined;
}
export { ɵ0, ɵ1 };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXN1Yi1mb3JtLXV0aWxzLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmd4LXN1Yi1mb3JtLyIsInNvdXJjZXMiOlsibGliL25neC1zdWItZm9ybS11dGlscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFFLFVBQVUsRUFBdUIsTUFBTSxlQUFlLENBQUM7QUFDaEUsT0FBTyxFQUtMLGFBQWEsRUFDYixpQkFBaUIsR0FFbEIsTUFBTSxnQkFBZ0IsQ0FBQztBQUN4QixPQUFPLEVBQWMsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUNsRCxPQUFPLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBRXJELE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBa0VqRSxNQUFNLFVBQVUseUJBQXlCLENBQUMsU0FBYztJQUN0RCxPQUFPO1FBQ0w7WUFDRSxPQUFPLEVBQUUsaUJBQWlCO1lBQzFCLFdBQVcsRUFBRSxVQUFVLENBQUMsY0FBTSxPQUFBLFNBQVMsRUFBVCxDQUFTLENBQUM7WUFDeEMsS0FBSyxFQUFFLElBQUk7U0FDWjtRQUNEO1lBQ0UsT0FBTyxFQUFFLGFBQWE7WUFDdEIsV0FBVyxFQUFFLFVBQVUsQ0FBQyxjQUFNLE9BQUEsU0FBUyxFQUFULENBQVMsQ0FBQztZQUN4QyxLQUFLLEVBQUUsSUFBSTtTQUNaO1FBQ0Q7WUFDRSxPQUFPLEVBQUUsd0JBQXdCO1lBQ2pDLFdBQVcsRUFBRSxVQUFVLENBQUMsY0FBTSxPQUFBLFNBQVMsRUFBVCxDQUFTLENBQUM7U0FDekM7S0FDRixDQUFDO0FBQ0osQ0FBQztBQUVELElBQU0sV0FBVyxHQUFHLFVBQUMsR0FBVyxJQUFhLE9BQUEsT0FBSSxHQUFHLE9BQUcsRUFBVixDQUFVLENBQUM7O0FBRXhEO0lBQWdFLDRDQUFLO0lBQ25FLGtDQUFZLG1CQUF3QjtlQUNsQyxrQkFDRSw2SEFBMkgsbUJBQW1CO2FBQzNJLEdBQUcsQ0FBQyxXQUFXLENBQUM7YUFDaEIsSUFBSSxDQUFDLElBQUksQ0FBRyxDQUNoQjtJQUNILENBQUM7SUFDSCwrQkFBQztBQUFELENBQUMsQUFSRCxDQUFnRSxLQUFLLEdBUXBFOztTQUdXLFVBQU8sSUFBWSxJQUFrRSxPQUFBLFVBQUEsR0FBRztJQUNoRyxPQUFBLEdBQUcsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLGNBQU0sT0FBQSxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQVgsQ0FBVyxDQUFDLENBQUM7QUFBckMsQ0FBcUMsRUFEd0QsQ0FDeEQ7QUFGekMsTUFBTSxDQUFDLElBQU0saURBQWlELEdBQUc7SUFDL0QsUUFBUSxJQUMrQjtDQUN4QyxDQUFDO0FBRUY7Ozs7R0FJRztBQUNILE1BQU0sVUFBVSxrQkFBa0IsQ0FBSSxTQUFvQjtJQUN4RCxPQUFPLFVBQUMsTUFBcUI7UUFDM0IsSUFBTSxTQUFTLEdBQUcsSUFBSSxPQUFPLEVBQUUsQ0FBQztRQUNoQyxJQUFNLGlCQUFpQixHQUFHLFNBQVMsQ0FBQyxXQUFXLENBQUM7UUFFaEQsU0FBUyxDQUFDLFdBQVcsR0FBRztZQUN0QixJQUFJLGlCQUFpQixFQUFFO2dCQUNyQixpQkFBaUIsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUM7YUFDcEM7WUFFRCxTQUFTLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDakIsU0FBUyxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQ3ZCLENBQUMsQ0FBQztRQUVGLE9BQU8sTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztJQUMzQyxDQUFDLENBQUM7QUFDSixDQUFDO0FBRUQsZ0JBQWdCO0FBQ2hCLE1BQU0sVUFBVSxpQkFBaUIsQ0FBQyxHQUFRO0lBQ3hDLE9BQU8sR0FBRyxLQUFLLElBQUksSUFBSSxHQUFHLEtBQUssU0FBUyxDQUFDO0FBQzNDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBmb3J3YXJkUmVmLCBPbkRlc3Ryb3ksIFByb3ZpZGVyIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7XHJcbiAgQWJzdHJhY3RDb250cm9sLFxyXG4gIEZvcm1BcnJheSxcclxuICBGb3JtQ29udHJvbCxcclxuICBGb3JtR3JvdXAsXHJcbiAgTkdfVkFMSURBVE9SUyxcclxuICBOR19WQUxVRV9BQ0NFU1NPUixcclxuICBWYWxpZGF0aW9uRXJyb3JzLFxyXG59IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgU3ViamVjdCwgdGltZXIgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgZGVib3VuY2UsIHRha2VVbnRpbCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuXHJcbmltcG9ydCB7IFNVQl9GT1JNX0NPTVBPTkVOVF9UT0tFTiB9IGZyb20gJy4vbmd4LXN1Yi1mb3JtLXRva2Vucyc7XHJcbmltcG9ydCB7IE5neFN1YkZvcm1Db21wb25lbnQgfSBmcm9tICcuL25neC1zdWItZm9ybS5jb21wb25lbnQnO1xyXG5cclxuZXhwb3J0IHR5cGUgQ29udHJvbHM8VD4gPSB7IFtLIGluIGtleW9mIFRdLT86IEFic3RyYWN0Q29udHJvbCB9O1xyXG5cclxuZXhwb3J0IHR5cGUgQ29udHJvbHNOYW1lczxUPiA9IHsgW0sgaW4ga2V5b2YgVF0tPzogSyB9O1xyXG5cclxuZXhwb3J0IHR5cGUgQ29udHJvbE1hcDxULCBWPiA9IHsgW0sgaW4ga2V5b2YgVF0tPzogViB9O1xyXG5cclxuZXhwb3J0IHR5cGUgQ29udHJvbHNUeXBlPFQ+ID0ge1xyXG4gIFtLIGluIGtleW9mIFRdLT86IFRbS10gZXh0ZW5kcyBhbnlbXSA/IFR5cGVkRm9ybUFycmF5PFRbS10+IDogVHlwZWRGb3JtQ29udHJvbDxUW0tdPiB8IFR5cGVkRm9ybUdyb3VwPFRbS10+O1xyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgRm9ybUVycm9yc1R5cGU8VD4gPSB7XHJcbiAgW0sgaW4ga2V5b2YgVF0tPzogVFtLXSBleHRlbmRzIGFueVtdID8gKG51bGwgfCBWYWxpZGF0aW9uRXJyb3JzKVtdIDogVmFsaWRhdGlvbkVycm9ycztcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIEZvcm1VcGRhdGU8Rm9ybUludGVyZmFjZT4gPSB7IFtGb3JtQ29udHJvbEludGVyZmFjZSBpbiBrZXlvZiBGb3JtSW50ZXJmYWNlXT86IHRydWUgfTtcclxuXHJcbmV4cG9ydCB0eXBlIEZvcm1FcnJvcnM8Rm9ybUludGVyZmFjZT4gPSBudWxsIHwgUGFydGlhbDxcclxuICBGb3JtRXJyb3JzVHlwZTxGb3JtSW50ZXJmYWNlPiAmIHtcclxuICAgIGZvcm1Hcm91cD86IFZhbGlkYXRpb25FcnJvcnM7XHJcbiAgfVxyXG4+O1xyXG5cclxuLy8gdXNpbmcgc2V0L3BhdGNoIHZhbHVlIG9wdGlvbnMgc2lnbmF0dXJlIGZyb20gZm9ybSBjb250cm9scyB0byBhbGxvdyB0eXBpbmcgd2l0aG91dCBhZGRpdGlvbmFsIGNhc3RpbmdcclxuZXhwb3J0IGludGVyZmFjZSBUeXBlZEFic3RyYWN0Q29udHJvbDxUVmFsdWU+IGV4dGVuZHMgQWJzdHJhY3RDb250cm9sIHtcclxuICB2YWx1ZTogVFZhbHVlO1xyXG4gIHZhbHVlQ2hhbmdlczogT2JzZXJ2YWJsZTxUVmFsdWU+O1xyXG4gIHNldFZhbHVlKHZhbHVlOiBUVmFsdWUsIG9wdGlvbnM/OiBQYXJhbWV0ZXJzPEFic3RyYWN0Q29udHJvbFsnc2V0VmFsdWUnXT5bMV0pOiB2b2lkO1xyXG4gIHBhdGNoVmFsdWUodmFsdWU6IFBhcnRpYWw8VFZhbHVlPiwgb3B0aW9ucz86IFBhcmFtZXRlcnM8QWJzdHJhY3RDb250cm9sWydwYXRjaFZhbHVlJ10+WzFdKTogdm9pZDtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBUeXBlZEZvcm1Hcm91cDxUVmFsdWU+IGV4dGVuZHMgRm9ybUdyb3VwIHtcclxuICB2YWx1ZTogVFZhbHVlO1xyXG4gIHZhbHVlQ2hhbmdlczogT2JzZXJ2YWJsZTxUVmFsdWU+O1xyXG4gIGNvbnRyb2xzOiBDb250cm9sc1R5cGU8VFZhbHVlPjtcclxuICBzZXRWYWx1ZSh2YWx1ZTogVFZhbHVlLCBvcHRpb25zPzogUGFyYW1ldGVyczxGb3JtR3JvdXBbJ3NldFZhbHVlJ10+WzFdKTogdm9pZDtcclxuICBwYXRjaFZhbHVlKHZhbHVlOiBQYXJ0aWFsPFRWYWx1ZT4sIG9wdGlvbnM/OiBQYXJhbWV0ZXJzPEZvcm1Hcm91cFsncGF0Y2hWYWx1ZSddPlsxXSk6IHZvaWQ7XHJcbiAgZ2V0UmF3VmFsdWUoKTogVFZhbHVlO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFR5cGVkRm9ybUFycmF5PFRWYWx1ZSBleHRlbmRzIGFueVtdPiBleHRlbmRzIEZvcm1BcnJheSB7XHJcbiAgdmFsdWU6IFRWYWx1ZTtcclxuICB2YWx1ZUNoYW5nZXM6IE9ic2VydmFibGU8VFZhbHVlPjtcclxuICBjb250cm9sczogVHlwZWRBYnN0cmFjdENvbnRyb2w8VFZhbHVlPltdO1xyXG4gIHNldFZhbHVlKHZhbHVlOiBUVmFsdWUsIG9wdGlvbnM/OiBQYXJhbWV0ZXJzPEZvcm1BcnJheVsnc2V0VmFsdWUnXT5bMV0pOiB2b2lkO1xyXG4gIHBhdGNoVmFsdWUodmFsdWU6IFRWYWx1ZSwgb3B0aW9ucz86IFBhcmFtZXRlcnM8Rm9ybUFycmF5WydwYXRjaFZhbHVlJ10+WzFdKTogdm9pZDtcclxuICBnZXRSYXdWYWx1ZSgpOiBUVmFsdWU7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVHlwZWRGb3JtQ29udHJvbDxUVmFsdWU+IGV4dGVuZHMgRm9ybUdyb3VwIHtcclxuICB2YWx1ZTogVFZhbHVlO1xyXG4gIHZhbHVlQ2hhbmdlczogT2JzZXJ2YWJsZTxUVmFsdWU+O1xyXG4gIHNldFZhbHVlKHZhbHVlOiBUVmFsdWUsIG9wdGlvbnM/OiBQYXJhbWV0ZXJzPEZvcm1Db250cm9sWydzZXRWYWx1ZSddPlsxXSk6IHZvaWQ7XHJcbiAgcGF0Y2hWYWx1ZSh2YWx1ZTogUGFydGlhbDxUVmFsdWU+LCBvcHRpb25zPzogUGFyYW1ldGVyczxGb3JtQ29udHJvbFsncGF0Y2hWYWx1ZSddPlsxXSk6IHZvaWQ7XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIEtleXNXaXRoVHlwZTxULCBWPiA9IHsgW0sgaW4ga2V5b2YgVF06IFRbS10gZXh0ZW5kcyBWID8gSyA6IG5ldmVyIH1ba2V5b2YgVF07XHJcblxyXG5leHBvcnQgdHlwZSBBcnJheVByb3BlcnR5S2V5PFQ+ID0gS2V5c1dpdGhUeXBlPFQsIEFycmF5PGFueT4+O1xyXG5cclxuZXhwb3J0IHR5cGUgQXJyYXlQcm9wZXJ0eVZhbHVlPFQsIEsgZXh0ZW5kcyBBcnJheVByb3BlcnR5S2V5PFQ+ID0gQXJyYXlQcm9wZXJ0eUtleTxUPj4gPSBUW0tdIGV4dGVuZHMgQXJyYXk8aW5mZXIgVT5cclxuICA/IFVcclxuICA6IG5ldmVyO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHN1YmZvcm1Db21wb25lbnRQcm92aWRlcnMoY29tcG9uZW50OiBhbnkpOiBQcm92aWRlcltdIHtcclxuICByZXR1cm4gW1xyXG4gICAge1xyXG4gICAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcclxuICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gY29tcG9uZW50KSxcclxuICAgICAgbXVsdGk6IHRydWUsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBwcm92aWRlOiBOR19WQUxJREFUT1JTLFxyXG4gICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBjb21wb25lbnQpLFxyXG4gICAgICBtdWx0aTogdHJ1ZSxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIHByb3ZpZGU6IFNVQl9GT1JNX0NPTVBPTkVOVF9UT0tFTixcclxuICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gY29tcG9uZW50KSxcclxuICAgIH0sXHJcbiAgXTtcclxufVxyXG5cclxuY29uc3Qgd3JhcEFzUXVvdGUgPSAoc3RyOiBzdHJpbmcpOiBzdHJpbmcgPT4gYFwiJHtzdHJ9XCJgO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1pc3NpbmdGb3JtQ29udHJvbHNFcnJvcjxUIGV4dGVuZHMgc3RyaW5nPiBleHRlbmRzIEVycm9yIHtcclxuICBjb25zdHJ1Y3RvcihtaXNzaW5nRm9ybUNvbnRyb2xzOiBUW10pIHtcclxuICAgIHN1cGVyKFxyXG4gICAgICBgQXR0ZW1wdCB0byB1cGRhdGUgdGhlIGZvcm0gdmFsdWUgd2l0aCBhbiBvYmplY3QgdGhhdCBkb2Vzbid0IGNvbnRhaW5zIHNvbWUgb2YgdGhlIHJlcXVpcmVkIGZvcm0gY29udHJvbCBrZXlzLlxcbk1pc3Npbmc6ICR7bWlzc2luZ0Zvcm1Db250cm9sc1xyXG4gICAgICAgIC5tYXAod3JhcEFzUXVvdGUpXHJcbiAgICAgICAgLmpvaW4oYCwgYCl9YCxcclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgTkdYX1NVQl9GT1JNX0hBTkRMRV9WQUxVRV9DSEFOR0VTX1JBVEVfU1RSQVRFR0lFUyA9IHtcclxuICBkZWJvdW5jZTogPFQsIFU+KHRpbWU6IG51bWJlcik6IFJldHVyblR5cGU8Tmd4U3ViRm9ybUNvbXBvbmVudDxULCBVPlsnaGFuZGxlRW1pc3Npb25SYXRlJ10+ID0+IG9icyA9PlxyXG4gICAgb2JzLnBpcGUoZGVib3VuY2UoKCkgPT4gdGltZXIodGltZSkpKSxcclxufTtcclxuXHJcbi8qKlxyXG4gKiBFYXNpbHkgdW5zdWJzY3JpYmUgZnJvbSBhbiBvYnNlcnZhYmxlIHN0cmVhbSBieSBhcHBlbmRpbmcgYHRha2VVbnRpbERlc3Ryb3llZCh0aGlzKWAgdG8gdGhlIG9ic2VydmFibGUgcGlwZS5cclxuICogSWYgdGhlIGNvbXBvbmVudCBhbHJlYWR5IGhhcyBhIGBuZ09uRGVzdHJveWAgbWV0aG9kIGRlZmluZWQsIGl0IHdpbGwgY2FsbCB0aGlzIGZpcnN0LlxyXG4gKiBOb3RlIHRoYXQgdGhlIGNvbXBvbmVudCAqbXVzdCogaW1wbGVtZW50IE9uRGVzdHJveSBmb3IgdGhpcyB0byB3b3JrICh0aGUgdHlwaW5ncyB3aWxsIGVuZm9yY2UgdGhpcyBhbnl3YXkpXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gdGFrZVVudGlsRGVzdHJveWVkPFQ+KGNvbXBvbmVudDogT25EZXN0cm95KTogKHNvdXJjZTogT2JzZXJ2YWJsZTxUPikgPT4gT2JzZXJ2YWJsZTxUPiB7XHJcbiAgcmV0dXJuIChzb3VyY2U6IE9ic2VydmFibGU8VD4pOiBPYnNlcnZhYmxlPFQ+ID0+IHtcclxuICAgIGNvbnN0IG9uRGVzdHJveSA9IG5ldyBTdWJqZWN0KCk7XHJcbiAgICBjb25zdCBwcmV2aW91c09uRGVzdHJveSA9IGNvbXBvbmVudC5uZ09uRGVzdHJveTtcclxuXHJcbiAgICBjb21wb25lbnQubmdPbkRlc3Ryb3kgPSAoKSA9PiB7XHJcbiAgICAgIGlmIChwcmV2aW91c09uRGVzdHJveSkge1xyXG4gICAgICAgIHByZXZpb3VzT25EZXN0cm95LmFwcGx5KGNvbXBvbmVudCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIG9uRGVzdHJveS5uZXh0KCk7XHJcbiAgICAgIG9uRGVzdHJveS5jb21wbGV0ZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gc291cmNlLnBpcGUodGFrZVVudGlsKG9uRGVzdHJveSkpO1xyXG4gIH07XHJcbn1cclxuXHJcbi8qKiBAaW50ZXJuYWwgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGlzTnVsbE9yVW5kZWZpbmVkKG9iajogYW55KTogb2JqIGlzIG51bGwgfCB1bmRlZmluZWQge1xyXG4gIHJldHVybiBvYmogPT09IG51bGwgfHwgb2JqID09PSB1bmRlZmluZWQ7XHJcbn1cclxuIl19